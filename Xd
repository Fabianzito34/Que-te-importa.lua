local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local silentAimEnabled = true

local function getClosestPlayerToCursor()
	local closestPlayer = nil
	local shortestDistance = math.huge

	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local screenPoint, onScreen = workspace.CurrentCamera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
			local distance = (Vector2.new(screenPoint.X, screenPoint.Y) - Vector2.new(Mouse.X, Mouse.Y)).Magnitude
			if onScreen and distance < shortestDistance then
				shortestDistance = distance
				closestPlayer = player
			end
		end
	end

	return closestPlayer
end

local function performRaycast()
	local targetPlayer = getClosestPlayerToCursor()
	if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
		local origin = workspace.CurrentCamera.CFrame.Position
		local direction = (targetPlayer.Character.HumanoidRootPart.Position - origin).Unit * 1000
		local raycastParams = RaycastParams.new()
		raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
		raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
		local result = workspace:Raycast(origin, direction, raycastParams)

		if result then
			print("ImpactÃ³ en: ", result.Instance:GetFullName())
		end
	end
end

Mouse.Button1Down:Connect(function()
	if silentAimEnabled then
		performRaycast()
	end
end)
